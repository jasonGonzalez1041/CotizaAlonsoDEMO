<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CotizAlonso - Sistema de Proformas con IA</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="index.html">
                <img style="height: 40px; margin-left: 20px; max-width: 220px;" src="./alonso-logo.png" alt="">
            </a>
            <button class="navbar-toggler" style="width: 40px; padding: 0;" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <form class="d-flex ms-auto me-3">
                    <div class="input-group">
                        <input type="search" class="form-control" placeholder="Buscar..." aria-label="Buscar">
                        <button class="btn btn-outline-dark" type="submit"><i class="fa-solid fa-search"></i></button>
                    </div>
                </form>
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link position-relative" id="notificacion_bell" href="#">
                            <i class="fa-solid fa-bell">
                                <span class="translate-middle badge rounded-pill bg-warning text-dark">3</span>
                            </i>
                           
                        </a>
                        <!-- Contenedor de notificaciones -->
                        <div id="notification-dropdown" class="notification-dropdown">
                            <div class="notification-header d-flex justify-content-between align-items-center p-2 border-bottom">
                                <h6 class="mb-0">Notificaciones</h6>
                                <small><a href="#" id="mark-all-read">Marcar todas como leídas</a></small>
                            </div>
                            <div id="notification-list" class="notification-list">
                                <!-- Las notificaciones se insertarán aquí dinámicamente -->
                                <div class="notification-item unread">
                                    <div class="d-flex">
                                        <div class="flex-shrink-0 me-3">
                                            <i class="fa-solid fa-file-invoice text-primary"></i>
                                        </div>
                                        <div class="flex-grow-1">
                                            <div class="notification-title">Nueva cotización</div>
                                            <div class="notification-message">La cotización ALO-186-4-2025 ha sido creada. Por favor revisar para aprobar o modificar.</div>
                                            <div class="notification-time">12:42 PM el 30/04/2025</div>
                                        </div>
                                    </div>
                                </div>
                                <!-- Más notificaciones... -->
                            </div>
                            <div class="notification-footer text-center p-2 border-top">
                                <a href="#" class="text-decoration-none">Ver todas las notificaciones</a>
                            </div>
                        </div>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#"><i class="fa-solid fa-user"></i> Admin</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="ajustes.html"><i class="fa-solid fa-gear"></i> Configuración</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#"><i class="fa-solid fa-right-from-bracket"></i> Salir</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row flex-nowrap">
            <div id="sidebar" class="sidebar col-2">
                <div class="d-flex flex-column flex-shrink-0">
                    <button id="sidebarToggle" class="btn m-auto">
                        <i class="fa-solid fa-chevron-left"></i>
                    </button>
                    <ul class="nav nav-pills flex-column mb-auto">
                        <li class="nav-item">
                            <a href="index.html" class="nav-link active" data-bs-toggle="tooltip" data-bs-placement="right" title="Dashboard">
                                <i class="fa-solid fa-gauge me-2"></i> <span>Dashboard</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="proformas_pendientes.html" class="nav-link" data-bs-toggle="tooltip" data-bs-placement="right" title="Proformas Pendientes">
                                <div>
                                    <i class="fa-solid fa-inbox me-2"></i> 
                                    <span>Proformas Pendientes</span>                                    
                                </div>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="proformas_enviadas.html" class="nav-link" data-bs-toggle="tooltip" data-bs-placement="right" title="Enviadas">
                                <div><i class="fa-solid fa-paper-plane me-2"></i> 
                                    <span>Enviadas</span>
                                </div>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="proformas_errores.html" class="nav-link" data-bs-toggle="tooltip" data-bs-placement="right" title="Con Errores">
                                <div><i class="fa-solid fa-circle-exclamation me-2"></i> 
                                    <span>Con Errores</span>
                                </div>
                            </a>
                        </li>
                    </ul>
                    <hr class="text-dark" style="margin:0;">
                    <ul class="nav nav-pills flex-column mb-auto ">
                        
                        <li class="nav-item">
                            <a href="clientes.html" class="nav-link" data-bs-toggle="tooltip" data-bs-placement="right" title="Clientes">
                                <i class="fa-solid fa-users me-2"></i> <span>Clientes</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="productos.html" class="nav-link" data-bs-toggle="tooltip" data-bs-placement="right" title="Productos">
                                <i class="fa-solid fa-cube me-2"></i> <span>Productos</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="plantillas.html" class="nav-link" data-bs-toggle="tooltip" data-bs-placement="right" title="Plantillas">
                                <i class="fa-solid fa-copy me-2"></i> <span>Plantillas</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="formulario.html" class="nav-link" data-bs-toggle="tooltip" data-bs-placement="right" title="Formulario">
                                <i class="fa-solid fa-pen-to-square me-2"></i> <span>Formulario</span>
                            </a>
                        </li>
                    </ul>
                    <hr class="text-dark" style="margin:0;">
                    <ul class="nav nav-pills flex-column mb-auto">
                        <li class="nav-item">
                            <a href="reportes.html" class="nav-link" data-bs-toggle="tooltip" data-bs-placement="right" title="Reportes">
                                <i class="fa-solid fa-chart-line me-2"></i> <span>Reportes</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="configia.html" class="nav-link" data-bs-toggle="tooltip" data-bs-placement="right" title="Config. IA">
                                <i class="fa-solid fa-robot me-2"></i> <span>Config. IA</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="ajustes.html" class="nav-link" data-bs-toggle="tooltip" data-bs-placement="right" title="Ajustes">
                                <i class="fa-solid fa-gears me-2"></i> <span>Ajustes</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="main col">
                <div class="row mb-4">
                    <div class="col-md-12">
                        <h1><i class="fa-solid fa-gauge me-2"></i> Dashboard</h1>
                        <p class="text-muted">Resumen general del sistema de cotizaciones</p>
                        <hr>
                    </div>
                </div>

                <!-- Tarjetas de métricas rápidas -->
                <div class="row mb-4">
                    <div class="col-md-12">
                        <div class="row g-4">
                            <!-- Tarjeta 1 -->
                            <div class="col-md-3">
                                <div class="card border-primary shadow-sm h-100">
                                    <div class="card-body">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div>
                                                <h6 class="text-uppercase text-muted mb-2">Proformas Hoy</h6>
                                                <h2 class="mb-0">12</h2>
                                            </div>
                                            <div class="bg-primary bg-opacity-10 p-2 rounded">
                                                <i class="fa-solid fa-file-invoice text-primary fa-2x"></i>
                                            </div>
                                        </div>
                                        <div class="mt-3">
                                            <span class="text-success"><i class="fa-solid fa-arrow-up"></i> 15%</span>
                                            <span class="text-muted"> vs. ayer</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Tarjeta 2 -->
                            <div class="col-md-3">
                                <div class="card border-success shadow-sm h-100">
                                    <div class="card-body">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div>
                                                <h6 class="text-uppercase text-muted mb-2">Aprobadas</h6>
                                                <h2 class="mb-0">28</h2>
                                            </div>
                                            <div class="bg-success bg-opacity-10 p-2 rounded">
                                                <i class="fa-solid fa-check-circle text-success fa-2x"></i>
                                            </div>
                                        </div>
                                        <div class="mt-3">
                                            <span class="text-success"><i class="fa-solid fa-arrow-up"></i> 22%</span>
                                            <span class="text-muted"> semana anterior</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Tarjeta 3 -->
                            <div class="col-md-3">
                                <div class="card border-warning shadow-sm h-100">
                                    <div class="card-body">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div>
                                                <h6 class="text-uppercase text-muted mb-2">Pendientes</h6>
                                                <h2 class="mb-0">5</h2>
                                            </div>
                                            <div class="bg-warning bg-opacity-10 p-2 rounded">
                                                <i class="fa-solid fa-clock text-warning fa-2x"></i>
                                            </div>
                                        </div>
                                        <div class="mt-3">
                                            <span class="text-danger"><i class="fa-solid fa-arrow-down"></i> 3%</span>
                                            <span class="text-muted"> semana anterior</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Tarjeta 4 -->
                            <div class="col-md-3">
                                <div class="card border-danger shadow-sm h-100">
                                    <div class="card-body">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div>
                                                <h6 class="text-uppercase text-muted mb-2">Tiempo Respuesta</h6>
                                                <h2 class="mb-0">4.2h</h2>
                                            </div>
                                            <div class="bg-danger bg-opacity-10 p-2 rounded">
                                                <i class="fa-solid fa-stopwatch text-danger fa-2x"></i>
                                            </div>
                                        </div>
                                        <div class="mt-3">
                                            <span class="text-success"><i class="fa-solid fa-arrow-down"></i> 1.1h</span>
                                            <span class="text-muted"> vs. mes pasado</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Gráficos y visualizaciones -->
                <div class="row mb-4">
                    <div class="col-md-7">
                        <div class="card shadow-sm">
                            <div class="card-header bg-light">
                                <h5 class="mb-0"><i class="fa-solid fa-chart-line me-2"></i> Proformas por Tipo (Últimos 7 días)</h5>
                            </div>
                            <div class="card-body">
                                <!-- Espacio para gráfico (usarías Chart.js o similar) -->
                                <div class="chart-container" style="position: relative; max-height:300px;">
                                    <canvas id="tipoProformasChart" style="max-width: 100%;"></canvas>
                                </div>
                                <div class="mt-3 text-center">
                                    <span class="badge bg-primary me-2"><i class="fa-solid fa-square"></i> FCL</span>
                                    <span class="badge bg-success me-2"><i class="fa-solid fa-square"></i> LCL</span>
                                    <span class="badge bg-warning text-dark"><i class="fa-solid fa-square"></i> Aéreo</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-5">
                        <div class="card shadow-sm ">
                            <div class="card-header bg-light">
                                <h5 class="mb-0"><i class="fa-solid fa-chart-pie me-2"></i> Distribución por Cliente</h5>
                            </div>
                            <div class="card-body">
                                <!-- Gráfico de dona -->
                                <div class="chart-container d-flex justify-content-center" style="position: relative; max-height:250px;">
                                    <canvas id="clientesChart"></canvas>
                                </div>
                                <div class="mt-3 small">
                                    <div class="d-flex justify-content-between mb-1">
                                        <span>LogiExpress</span>
                                        <span>32%</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-1">
                                        <span>Transportes Rápidos</span>
                                        <span>25%</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-1">
                                        <span>Carga Segura</span>
                                        <span>18%</span>
                                    </div>
                                    <div class="d-flex justify-content-between">
                                        <span>Otros</span>
                                        <span>25%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Proformas recientes y actividad -->
                <div class="row">
                    <div class="col-md-6">
                        <div class="card shadow-sm">
                            <div class="card-header bg-light d-flex justify-content-between align-items-center">
                                <h5 class="mb-0"><i class="fa-solid fa-clock-rotate-left me-2"></i> Actividad Reciente</h5>
                                <a href="#" class="btn btn-sm btn-outline-primary">Ver todo</a>
                            </div>
                            <div class="card-body p-0">
                                <ul class="list-group list-group-flush">
                                    <li class="list-group-item">
                                        <div class="d-flex">
                                            <div class="flex-shrink-0 text-success">
                                                <i class="fa-solid fa-check-circle"></i>
                                            </div>
                                            <div class="flex-grow-1 ms-3">
                                                <small class="text-muted float-end">Hace 15 min</small>
                                                <h6 class="mb-1">Proforma #ALO 185-04-2025 aprobada</h6>
                                                <p class="mb-0 small">Para Transportes Rápidos (LCL Shanghai-Lima)</p>
                                            </div>
                                        </div>
                                    </li>
                                    <li class="list-group-item">
                                        <div class="d-flex">
                                            <div class="flex-shrink-0 text-warning">
                                                <i class="fa-solid fa-pen"></i>
                                            </div>
                                            <div class="flex-grow-1 ms-3">
                                                <small class="text-muted float-end">Hace 32 min</small>
                                                <h6 class="mb-1">Proforma #ALO 184-04-2025 modificada</h6>
                                                <p class="mb-0 small">Ajuste en costos aduaneros para LogiExpress</p>
                                            </div>
                                        </div>
                                    </li>
                                    <li class="list-group-item">
                                        <div class="d-flex">
                                            <div class="flex-shrink-0 text-primary">
                                                <i class="fa-solid fa-plus"></i>
                                            </div>
                                            <div class="flex-grow-1 ms-3">
                                                <small class="text-muted float-end">Hace 1h 10min</small>
                                                <h6 class="mb-1">Nueva solicitud recibida</h6>
                                                <p class="mb-0 small">De Carga Segura (Aéreo Miami-Lima)</p>
                                            </div>
                                        </div>
                                    </li>
                                    <li class="list-group-item">
                                        <div class="d-flex">
                                            <div class="flex-shrink-0 text-danger">
                                                <i class="fa-solid fa-xmark"></i>
                                            </div>
                                            <div class="flex-grow-1 ms-3">
                                                <small class="text-muted float-end">Hace 2h 15min</small>
                                                <h6 class="mb-1">Proforma #ALO 182-04-2025 rechazada</h6>
                                                <p class="mb-0 small">Faltaban datos de aduana (EnvíaRápido)</p>
                                            </div>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-6">
                        <div class="card shadow-sm">
                            <div class="card-header bg-light d-flex justify-content-between align-items-center">
                                <h5 class="mb-0"><i class="fa-solid fa-star me-2"></i> Clientes Frecuentes</h5>
                                <a href="#" class="btn btn-sm btn-outline-primary">Ver todos</a>
                            </div>
                            <div class="card-body p-0">
                                <div class="table-responsive">
                                    <table class="table table-hover mb-0">
                                        <thead class="table-light">
                                            <tr>
                                                <th>Cliente</th>
                                                <th>Proformas</th>
                                                <th>Última</th>
                                                <th>Acciones</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>LogiExpress S.A.</td>
                                                <td>24</td>
                                                <td>Hoy</td>
                                                <td><button class="btn btn-sm btn-outline-primary"><i class="fa-solid fa-eye"></i></button></td>
                                            </tr>
                                            <tr>
                                                <td>Transportes Rápidos</td>
                                                <td>18</td>
                                                <td>Ayer</td>
                                                <td><button class="btn btn-sm btn-outline-primary"><i class="fa-solid fa-eye"></i></button></td>
                                            </tr>
                                            <tr>
                                                <td>Carga Segura</td>
                                                <td>12</td>
                                                <td>20/04</td>
                                                <td><button class="btn btn-sm btn-outline-primary"><i class="fa-solid fa-eye"></i></button></td>
                                            </tr>
                                            <tr>
                                                <td>EnvíaRápido</td>
                                                <td>8</td>
                                                <td>19/04</td>
                                                <td><button class="btn btn-sm btn-outline-primary"><i class="fa-solid fa-eye"></i></button></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="script.js"></script>
    <script> 
        const tipoCtx = document.getElementById('tipoProformasChart').getContext('2d');
        const tipoChart = new Chart(tipoCtx, {
            type: 'bar',
            data: {
                labels: ['Lun', 'Mar', 'Mié', 'Jue', 'Vie', 'Sáb', 'Dom'],
                datasets: [
                    {
                        label: 'FCL',
                        data: [12, 19, 8, 15, 12, 5, 9],
                        backgroundColor: '#0d6efd',
                        borderWidth: 0
                    },
                    {
                        label: 'LCL',
                        data: [8, 11, 5, 9, 7, 3, 6],
                        backgroundColor: '#198754',
                        borderWidth: 0
                    },
                    {
                        label: 'Aéreo',
                        data: [5, 8, 4, 6, 5, 2, 4],
                        backgroundColor: '#ffc107',
                        borderWidth: 0
                    }
                ]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    x: {
                        stacked: true,
                        grid: {
                            display: false
                        }
                    },
                    y: {
                        stacked: true,
                        beginAtZero: true
                    }
                }
            }
        });

        // Gráfico de dona - Distribución por cliente
        const clientesCtx = document.getElementById('clientesChart').getContext('2d');
        const clientesChart = new Chart(clientesCtx, {
            type: 'doughnut',
            data: {
                labels: ['LogiExpress', 'Transportes Rápidos', 'Carga Segura', 'Otros'],
                datasets: [{
                    data: [32, 25, 18, 25],
                    backgroundColor: [
                        '#0d6efd',
                        '#198754',
                        '#ffc107',
                        '#dc3545'
                    ],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        display: false
                    }
                },
                cutout: '70%'
            }
        });
    
    </script>
</body>
</html>